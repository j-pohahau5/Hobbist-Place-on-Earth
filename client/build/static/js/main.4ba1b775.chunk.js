(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{76:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a,c,i,s,r,o=n(1),l=n.n(o),d=n(66),b=n.n(d),j=(n(76),n(35)),m=n(70),u=n(90),h=n(92),g=n(89),O=n(68),p=n(24),x=n(5),f=n(6),v=function(){return Object(f.jsx)("main",{children:Object(f.jsxs)("div",{className:"flex-row justify-center",children:[Object(f.jsx)("div",{className:"col-12 col-md-10 mb-3 p-3",style:{border:"1px dotted #1a1a1a"}}),Object(f.jsx)("div",{children:"testing"}),Object(f.jsxs)("div",{className:"col-12 col-md-8 mb-3",children:[Object(f.jsx)("div",{children:"Loading..."}),"/>"]})]})})},k=n(8),w=n(14),N=n(13),y=n(10),$=n(93),S=n(38),_=n(91),C=(Object(_.a)(a||(a=Object(S.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),Object(_.a)(c||(c=Object(S.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"])))),I=(Object(_.a)(i||(i=Object(S.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),Object(_.a)(s||(s=Object(S.a)(["\n  mutation addCategory ( $title: $title, $description: $description){\n    addCategory ( $title: $title, $description: $description) {\n      _id\n      title\n      description\n      hobby {\n        _id\n        title\n      }\n      user {\n        _id\n        firstname\n      }\n    }\n    \n  }\n"]))),Object(_.a)(r||(r=Object(S.a)(["\nmutation addHobby ( $title: $title, $description: $description){\n  addHobby ( $title: $title, $description: $description) {\n    title\n    description\n    category {\n      _id\n      title\n    }\n    user {\n      _id\n      firstname\n    }\n  }\n  \n}\n"]))),n(29)),T=n(30),F=n(58),L=new(function(){function e(){Object(I.a)(this,e)}return Object(T.a)(e,[{key:"getProfile",value:function(){return Object(F.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(F.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),P=function(e){var t=Object(o.useState)({email:"",password:""}),n=Object(y.a)(t,2),a=n[0],c=n[1],i=Object($.a)(C),s=Object(y.a)(i,2),r=s[0],l=s[1],d=l.error,b=l.data,m=function(e){var t=e.target,n=t.name,i=t.value;c(Object(j.a)(Object(j.a)({},a),{},Object(N.a)({},n,i)))},u=function(){var e=Object(w.a)(Object(k.a)().mark((function e(t){var n,i;return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,r({variables:Object(j.a)({},a)});case 5:n=e.sent,i=n.data,L.login(i.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(f.jsx)("div",{className:"col-12 col-lg-10",children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(f.jsxs)("div",{className:"card-body",children:[b?Object(f.jsxs)("p",{children:["Success! You may now head"," ",Object(f.jsx)(p.b,{to:"/",children:"back to the homepage."})]}):Object(f.jsxs)("form",{onSubmit:u,children:[Object(f.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:m}),Object(f.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:m}),Object(f.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),d&&Object(f.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:d.message})]})]})})})},B=function(){return Object(f.jsx)("header",{className:"bg-primary text-dark mb-4 py-3 flex-row align-center",children:Object(f.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(p.b,{className:"text-light",to:"/",children:Object(f.jsx)("h1",{className:"m-0",children:"Hobbies Place "})}),Object(f.jsx)("p",{className:"m-0",children:"Get into the mind of a programmer."})]}),Object(f.jsx)("div",{children:L.loggedIn()?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(p.b,{className:"btn btn-lg btn-info m-2",to:"/me",children:[L.getProfile().data.username,"'s profile"]}),Object(f.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),L.logout()},children:"Logout"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.b,{className:"btn btn-lg btn-info m-2",to:"/login",children:"Login"}),Object(f.jsx)(p.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},D=function(){var e=Object(x.k)(),t=Object(x.m)();return Object(f.jsx)("footer",{className:"w-100 mt-auto bg-secondary p-4",children:Object(f.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object(f.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t(-1)},children:"\u2190 Go Back"}),Object(f.jsxs)("h4",{children:["Hobbiest Place on Earth"," ",Object(f.jsx)("span",{className:"emoji",role:"img","aria-label":"heart","aria-hidden":"false",children:"\u2764\ufe0f"})," ","by the Team 7."]})]})})},E=Object(m.a)({uri:"/graphql"}),H=Object(O.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(j.a)(Object(j.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),G=new u.a({link:H.concat(E),cache:new h.a});var J=function(){return Object(f.jsx)(g.a,{client:G,children:Object(f.jsx)(p.a,{children:Object(f.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(f.jsx)(B,{}),Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)(x.c,{children:[Object(f.jsx)(x.a,{path:"/",element:Object(f.jsx)(v,{})}),Object(f.jsx)(x.a,{path:"/login",element:Object(f.jsx)(P,{})})]})}),Object(f.jsx)(D,{})]})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};b.a.render(Object(f.jsx)(l.a.StrictMode,{children:Object(f.jsx)(J,{})}),document.getElementById("root")),U()}},[[79,1,2]]]);
//# sourceMappingURL=main.4ba1b775.chunk.js.map